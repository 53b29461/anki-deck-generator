# CLAUDE.md - Anki Deck Generator Project

このファイルは Anki Deck Generator プロジェクト専用の設定・ガイドファイルです。

## 📋 プロジェクト概要

### 🎯 目的
TOEFL 3800 Rank3の英単語について、高品質なAnki暗記カードの裏面を自動生成するシステムの構築。

### 🔄 背景
- **手動作業の自動化**: これまでChatGPTに1つ1つ手動投稿していた作業を自動化
- **学習履歴継続**: 既存AnkiデッキのGUIDを保持して学習進捗を維持
- **品質向上**: 語源・例文・記憶術を含む高品質な学習コンテンツ生成

## 📁 プロジェクト構造

```
/home/user/.pg/development-projects/anki-deck-generator/
├── CLAUDE.md                    # このファイル
├── data/
│   ├── input/
│   │   └── toefl3800__rank3.txt # 元データ（ホームディレクトリからコピー）
│   ├── output/
│   │   └── enhanced_deck.txt    # 生成結果
│   └── temp/                    # 一時ファイル
├── scripts/
│   ├── word_extractor.py        # 英単語抽出スクリプト
│   ├── ai_processor.py          # AI処理（ChatGPT/Gemini/Claude）
│   └── deck_generator.py        # 最終デッキ生成
└── config/
    ├── prompts.txt              # AIプロンプトテンプレート
    └── settings.json            # 設定ファイル
```

## 📊 入力データフォーマット

**toefl3800__rank3.txt の構造**:
```
[GUID]	Basic	toefl3800::rank3	[英単語]	[日本語訳]	[追加情報]
```

**例**:
```
rOl.*)J=yE	Basic	toefl3800::rank3	ambush	待ち伏せて急襲する	
```

## 🎯 目標出力フォーマット

**強化された Anki カード**:
```
[GUID]	Basic	toefl3800::rank3	[英単語]	[強化された裏面コンテンツ]	
```

**裏面コンテンツ構造**:
```
[意味（1つでも複数でも可）]

[英語例文①（訳なし）]  
[英語例文②（訳なし）]  
[英語例文③（訳なし）]

[覚えるためのTips（語源または語呂合わせなど）]
```

## 🤖 AI処理選択肢

### 1. ChatGPT API
**メリット**:
- ✅ 品質確認済み（手動テスト実施済み）
- ✅ 高品質な語源説明・関連語彙
- ✅ 自然で実用的な例文生成

**デメリット**:
- ❌ API料金が発生
- ❌ API設定・認証が必要
- ❌ レート制限あり

### 2. Gemini CLI
**メリット**:
- ✅ 無料（VPS上で認証済み）
- ✅ 24時間稼働可能
- ✅ フォーマット遵守良好

**デメリット**:
- ⚠️ 語源説明がシンプル
- ⚠️ 関連語彙への言及少ない
- ❓ 大量処理での品質一貫性未確認

### 3. Claude Code（このセッション）
**メリット**:
- ✅ プロジェクト文脈完全理解
- ✅ りょうくんの学習目標把握済み
- ✅ 高品質出力

**デメリット**:
- ❌ セッション制限
- ❌ 大量自動処理に不向き
- ❌ 費用効率悪い

## 🔄 処理ワークフロー案

### Phase 1: データ準備
1. `toefl3800__rank3.txt` から英単語とGUID抽出
2. 処理対象リスト作成（約XXX語）
3. バッチ処理の分割設計

### Phase 2: AI処理選択
**選択肢A: 高品質重視（ChatGPT API）**
```bash
# API設定 → 自動バッチ処理 → 品質確認
```

**選択肢B: 費用重視（Gemini CLI）**
```bash
# Gemini CLI → 一部Claude補強 → 品質向上
```

**選択肢C: ハイブリッド**
```bash
# Gemini CLI初回生成 → ChatGPT品質向上 → 最適化
```

### Phase 3: 結果統合
1. AI生成結果の品質チェック
2. GUID付きAnki形式への再構成
3. インポート可能ファイル生成

## 🎯 学習目標との整合性

**りょうくんのTOEFL目標**: 100+達成
**必要な学習品質**:
- 語源理解による語彙拡張
- 実用的な例文での文脈理解
- 記憶術による定着率向上

**→ 品質重視でChatGPT API推奨、費用面でGemini CLI検討**

## 🚀 VPS環境活用

**24時間稼働の利点**:
- 大量バッチ処理の時間制約なし
- 複数AI併用での品質比較可能
- 段階的改善アプローチ実施可能

## 📝 開発ログ

### 2025-07-03
- プロジェクト開始
- GitHub リポジトリ作成: `anki-deck-generator`
- データ構造分析完了
- AI選択肢比較実施
- ChatGPT品質ベンチマーク確認
- Gemini CLI初期テスト実施（ambush → 良好）

### 進行状況
- [x] プロジェクト設計
- [x] データ形式分析  
- [x] AI選択肢調査
- [ ] 最終AI選択決定
- [ ] 実装開始

## 🔧 技術仕様

**依存関係**:
- Python 3.12+
- Gemini CLI（認証済み）
- ChatGPT API（選択時）
- 標準ライブラリ（re, json, csv）

**パフォーマンス目標**:
- 処理時間: 制約なし（24時間稼働）
- 品質: TOEFL 100+レベル対応
- 一貫性: 全単語で統一フォーマット

---

**作成日**: 2025-07-03  
**プロジェクト責任者**: りょうくん（TOEFL 100+目標）  
**技術サポート**: Claude Code（VPS: 160.251.167.39）